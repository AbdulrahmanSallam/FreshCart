"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[80],{5080:(C,h,s)=>{s.r(h),s.d(h,{WishlistComponent:()=>A});var u=s(6814),_=s(95),d=s(1120),p=s(9617),c=s(6787),t=s(4769),i=s(6286),a=s(2425),v=s(9196);function f(o,m){if(1&o&&t._UZ(0,"i",19),2&o){const e=m.$implicit,r=t.oxw().$implicit;t.ekj("text-warning",r.ratingsAverage>=e)}}const E=function(o){return["/details",o]},x=function(){return[1,2,3,4,5]};function O(o,m){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"div")(2,"div",7)(3,"span",8)(4,"i",9),t.NdJ("click",function(){const l=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.removeFromWishlist(l.id))}),t.qZA()(),t.TgZ(5,"header",10),t._UZ(6,"img",11),t.TgZ(7,"span",12),t._uU(8),t.qZA(),t.TgZ(9,"h2",13),t._uU(10),t.ALo(11,"limitText"),t.qZA(),t.TgZ(12,"div",14)(13,"div"),t.YNc(14,f,1,2,"i",15),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA()()(),t.TgZ(17,"div")(18,"div",14)(19,"span",16),t._uU(20,"Price :"),t.qZA(),t.TgZ(21,"span"),t._uU(22),t.ALo(23,"currency"),t.qZA()(),t.TgZ(24,"button",17,18),t.NdJ("click",function(){const l=t.CHM(e).$implicit,g=t.MAs(25),P=t.oxw(2);return t.KtG(P.addToCart(l.id,g))}),t._uU(26,"Add to cart"),t.qZA()()()()()}if(2&o){const e=m.$implicit;t.xp6(5),t.Q6J("routerLink",t.VKq(14,E,e.id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH)("alt",e.title),t.xp6(2),t.Oqu(e.category.name),t.xp6(2),t.Oqu(t.xi3(11,8,e.title,2)),t.xp6(4),t.Q6J("ngForOf",t.DdM(16,x)),t.xp6(2),t.Oqu(e.ratingsAverage),t.xp6(6),t.Oqu(t.xi3(23,11,e.price,"LE "))}}function T(o,m){if(1&o){const e=t.EpF();t.TgZ(0,"section",2)(1,"input",3),t.NdJ("ngModelChange",function(n){t.CHM(e);const l=t.oxw();return t.KtG(l.search=n)}),t.qZA(),t.TgZ(2,"div",4),t.YNc(3,O,27,17,"div",5),t.ALo(4,"search"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.search),t.xp6(2),t.Q6J("ngForOf",t.xi3(4,2,e.products,e.search))}}function M(o,m){1&o&&(t.TgZ(0,"h2",20),t._uU(1," Your wishlist is empty "),t.qZA())}let A=(()=>{class o{constructor(e,r,n,l,g){this._CartService=e,this._ToastrService=r,this._WishlistService=n,this._Renderer2=l,this._Router=g,this.search="",this.products=[]}ngOnInit(){this._WishlistService.getWishListItems().subscribe({next:e=>{this.products=e.data},error:e=>{console.log("wishlist",e)}})}addToCart(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.addProductToCart(e).subscribe({next:n=>{"success"==n.status&&(this._Renderer2.removeAttribute(r,"disabled"),this._ToastrService.success(n.message),console.log(n),this._CartService.cartItemsCount.next(n.numOfCartItems))},error:n=>{this._Renderer2.removeAttribute(r,"disabled"),console.log("addcart",n)}})}removeFromWishlist(e){this.products.length>0?this._WishlistService.removeItem(e).subscribe({next:r=>{this.ngOnInit(),"success"==r.status&&(this._WishlistService.wishlistItemsCount.next(r.data.length),this._ToastrService.success("Product removed successfully form  your wishlist"))},error:r=>{console.log("addcart",r)}}):this._Router.navigate(["/home"])}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(i.N),t.Y36(a._W),t.Y36(v.M),t.Y36(t.Qsj),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","my-3",4,"ngIf","ngIfElse"],["empty",""],[1,"my-3"],["type","search","placeholder","Search...",1,"form-control","bg-dark-subtle","w-75","m-auto",3,"ngModel","ngModelChange"],[1,"row","g-4","my-4"],["class","col-sm-6 col-md-4 col-lg-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-2"],[1,"product","mx-5","mx-sm-0","p-3","d-flex","flex-column","h-100","justify-content-between"],[1,"love",2,"font-size","30px"],[1,"fas","cursor-pointer","fa-heart","text-main",3,"click"],[1,"cursor-pointer",3,"routerLink"],[1,"w-100","d-block",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],["class","fas fa-star",3,"text-warning",4,"ngFor","ngForOf"],[1,"text-main"],[1,"main-btn","w-100",3,"click"],["btn",""],[1,"fas","fa-star"],[1,"fw-bolder","my-5","text-center"]],template:function(r,n){if(1&r&&(t.YNc(0,T,5,5,"section",0),t.YNc(1,M,2,0,"ng-template",null,1,t.W1O)),2&r){const l=t.MAs(2);t.Q6J("ngIf",n.products.length)("ngIfElse",l)}},dependencies:[u.ez,u.sg,u.O5,u.H9,d.rH,p.f,_.u5,_.Fj,_.JJ,_.On,c.C]})}return o})()},6286:(C,h,s)=>{s.d(h,{N:()=>p});var u=s(5619),_=s(4769),d=s(9862);let p=(()=>{class c{constructor(i){this._HttpClient=i,this.baseUrl="https://ecommerce.routemisr.com/api/v1/cart/",this.cartItemsCount=new u.X(0)}getCartProducts(){return this._HttpClient.get(this.baseUrl)}addProductToCart(i){return this._HttpClient.post(this.baseUrl,{productId:i})}removeProduct(i){return this._HttpClient.delete(this.baseUrl+`${i}`)}clearCart(){return this._HttpClient.delete(this.baseUrl)}updateProductQuantity(i,a){return this._HttpClient.put(this.baseUrl+`${i}`,{count:a})}checkoutSession(i,a){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${i}?url=http://localhost:4200`,{shippingAddress:a})}getAllOrders(i){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${i}`)}static#t=this.\u0275fac=function(a){return new(a||c)(_.LFG(d.eN))};static#e=this.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},9196:(C,h,s)=>{s.d(h,{M:()=>p});var u=s(5619),_=s(4769),d=s(9862);let p=(()=>{class c{constructor(i){this._HttpClient=i,this.wishlistItemsCount=new u.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/wishlist/"}addToWishList(i){return this._HttpClient.post(this.baseUrl,{productId:i})}removeItem(i){return this._HttpClient.delete(this.baseUrl+`${i}`)}getWishListItems(){return this._HttpClient.get(this.baseUrl)}static#t=this.\u0275fac=function(a){return new(a||c)(_.LFG(d.eN))};static#e=this.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);