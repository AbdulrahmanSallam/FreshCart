"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[848],{848:(p,_,o)=>{o.r(_),o.d(_,{AllordersComponent:()=>h});var c=o(6814),u=o(9617),t=o(4769),d=o(6286),n=o(9410);function m(r,a){if(1&r&&(t.TgZ(0,"div",12)(1,"div",13),t._UZ(2,"img",14),t.qZA(),t.TgZ(3,"div")(4,"h3",15),t._uU(5),t.ALo(6,"limitText"),t.qZA(),t.TgZ(7,"div",16)(8,"span"),t._uU(9,"Count: "),t.TgZ(10,"span",9),t._uU(11),t.qZA()(),t.TgZ(12,"span"),t._uU(13,"Price: "),t.TgZ(14,"span"),t._uU(15),t.qZA()()()()()),2&r){const e=a.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(3),t.Oqu(t.xi3(6,5,e.product.title,2)),t.xp6(6),t.Oqu(e.count),t.xp6(4),t.Oqu(e.price*e.count)}}function s(r,a){if(1&r&&(t.TgZ(0,"div",4)(1,"header",5)(2,"h2",6),t._uU(3,"Order"),t.qZA(),t.TgZ(4,"span",7),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"div",8)(8,"span"),t._uU(9," Total order price: "),t.TgZ(10,"span",9),t._uU(11),t.qZA()(),t.TgZ(12,"span"),t._uU(13," Count of Products: "),t.TgZ(14,"span",9),t._uU(15),t.qZA()()(),t.TgZ(16,"div",10),t.YNc(17,m,16,8,"div",11),t.qZA()()),2&r){const e=a.$implicit;t.xp6(5),t.Oqu(t.lcZ(6,4,e.paidAt)),t.xp6(6),t.Oqu(e.totalOrderPrice),t.xp6(4),t.Oqu(e.cartItems.length),t.xp6(2),t.Q6J("ngForOf",e.cartItems)}}function i(r,a){if(1&r&&(t.TgZ(0,"section",2),t.YNc(1,s,18,6,"div",3),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.allOrders)}}function g(r,a){1&r&&(t.TgZ(0,"h2",17),t._uU(1," Must make an order first "),t.qZA())}let h=(()=>{class r{constructor(e,l){this._CartService=e,this._AuthService=l,this.allOrders=[]}ngOnInit(){this._AuthService.getUserInfo(),this._CartService.getAllOrders(this._AuthService.userInfo.id).subscribe({next:e=>{this.allOrders=e},error:e=>{console.log(e)}})}static#t=this.\u0275fac=function(l){return new(l||r)(t.Y36(d.N),t.Y36(n.e))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-allorders"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","my-2 bg-main-light rounded-2",4,"ngIf","ngIfElse"],["empty",""],[1,"my-2","bg-main-light","rounded-2"],["class","border-bottom border-2 p-3",4,"ngFor","ngForOf"],[1,"border-bottom","border-2","p-3"],[1,"mx-auto","text-center","w-25"],[1,"head"],[1,"text-main","fw-bold"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-main"],[1,"row","g-4"],["class","col-6 col-sm-4 col-md-3 col-lg-2",4,"ngFor","ngForOf"],[1,"col-6","col-sm-4","col-md-3","col-lg-2"],[1,"p-3"],[1,"w-100","d-block",3,"src","alt"],[1,"h6","text-center","text-main"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bolder","my-5","text-center"]],template:function(l,f){if(1&l&&(t.YNc(0,i,2,1,"section",0),t.YNc(1,g,2,0,"ng-template",null,1,t.W1O)),2&l){const v=t.MAs(2);t.Q6J("ngIf",f.allOrders.length)("ngIfElse",v)}},dependencies:[c.ez,c.sg,c.O5,c.uU,u.f]})}return r})()},6286:(p,_,o)=>{o.d(_,{N:()=>d});var c=o(5619),u=o(4769),t=o(9862);let d=(()=>{class n{constructor(s){this._HttpClient=s,this.baseUrl="https://ecommerce.routemisr.com/api/v1/cart/",this.cartItemsCount=new c.X(0)}getCartProducts(){return this._HttpClient.get(this.baseUrl)}addProductToCart(s){return this._HttpClient.post(this.baseUrl,{productId:s})}removeProduct(s){return this._HttpClient.delete(this.baseUrl+`${s}`)}clearCart(){return this._HttpClient.delete(this.baseUrl)}updateProductQuantity(s,i){return this._HttpClient.put(this.baseUrl+`${s}`,{count:i})}checkoutSession(s,i){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${s}?url=http://localhost:4200`,{shippingAddress:i})}getAllOrders(s){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${s}`)}static#t=this.\u0275fac=function(i){return new(i||n)(u.LFG(t.eN))};static#e=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);