"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[683],{2683:(S,_,a)=>{a.r(_),a.d(_,{ForgetpasswordComponent:()=>Q});var l=a(6814),n=a(95),e=a(4769),d=a(9410),g=a(1120),p=a(2425);function m(s,i){1&s&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e._uU(2," Email is required"),e.qZA())}function u(s,i){1&s&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e._uU(2," Invlaid email"),e.qZA())}function c(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,m,3,0,"p",12),e.YNc(2,u,3,0,"p",12),e.qZA()),2&s){const t=e.oxw(2);let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=t.forgetForm.get("email"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.forgetForm.get("email"))?null:r.getError("email"))}}function f(s,i){if(1&s&&(e.TgZ(0,"p",15),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Oqu(t.msgErr)}}function h(s,i){1&s&&e._UZ(0,"i",16)}function v(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",1)(1,"h1",2),e._uU(2,"forget password"),e.qZA(),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleForget())}),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Email :"),e.qZA(),e._UZ(7,"input",6),e.YNc(8,c,3,2,"div",7),e.qZA(),e.TgZ(9,"div",8),e.YNc(10,f,2,1,"p",9),e.TgZ(11,"button",10),e.YNc(12,h,1,0,"i",11),e._uU(13," Submit"),e.qZA()()()()}if(2&s){const t=e.oxw();let o;e.xp6(3),e.Q6J("formGroup",t.forgetForm),e.xp6(5),e.Q6J("ngIf",(null==(o=t.forgetForm.get("email"))?null:o.errors)&&(null==(o=t.forgetForm.get("email"))?null:o.touched)),e.xp6(2),e.Q6J("ngIf",t.msgErr),e.xp6(1),e.Q6J("disabled",t.forgetForm.invalid),e.xp6(1),e.Q6J("ngIf",t.isloading)}}function x(s,i){1&s&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e._uU(2," Reset code is required"),e.qZA())}function Z(s,i){1&s&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e._uU(2," Invlaid code"),e.qZA())}function F(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,x,3,0,"p",12),e.YNc(2,Z,3,0,"p",12),e.qZA()),2&s){const t=e.oxw(2);let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=t.forgetForm.get("resetCode"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.forgetForm.get("resetCode"))?null:r.getError("pattern"))}}function w(s,i){if(1&s&&(e.TgZ(0,"p",15),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Oqu(t.msgErr)}}function T(s,i){1&s&&e._UZ(0,"i",16)}function C(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",1)(1,"h1",2),e._uU(2,"Forget password"),e.qZA(),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleresetCode())}),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Reset code :"),e.qZA(),e._UZ(7,"input",17),e.YNc(8,F,3,2,"div",7),e.qZA(),e.TgZ(9,"div",8),e.YNc(10,w,2,1,"p",9),e.TgZ(11,"button",10),e.YNc(12,T,1,0,"i",11),e._uU(13," Submit"),e.qZA()()()()}if(2&s){const t=e.oxw();let o;e.xp6(3),e.Q6J("formGroup",t.resetCodeForm),e.xp6(5),e.Q6J("ngIf",(null==(o=t.forgetForm.get("resetCode"))?null:o.errors)&&(null==(o=t.forgetForm.get("resetCode"))?null:o.touched)),e.xp6(2),e.Q6J("ngIf",t.msgErr),e.xp6(1),e.Q6J("disabled",t.resetCodeForm.invalid),e.xp6(1),e.Q6J("ngIf",t.isloading)}}function A(s,i){1&s&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e._uU(2," Email is required"),e.qZA())}function E(s,i){1&s&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e._uU(2," Invlaid email"),e.qZA())}function I(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,A,3,0,"p",12),e.YNc(2,E,3,0,"p",12),e.qZA()),2&s){const t=e.oxw(2);let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=t.resetPassForm.get("email"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.resetPassForm.get("email"))?null:r.getError("email"))}}function U(s,i){1&s&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e._uU(2," newPassword is required"),e.qZA())}function q(s,i){1&s&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e._uU(2," Start with capital letter, (A-Z or a-z) and numbers(0-9), 6 to 10 Characters"),e.qZA())}function P(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,U,3,0,"p",12),e.YNc(2,q,3,0,"p",12),e.qZA()),2&s){const t=e.oxw(2);let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=t.resetPassForm.get("newPassword"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.resetPassForm.get("newPassword"))?null:r.getError("pattern"))}}function J(s,i){if(1&s&&(e.TgZ(0,"p",15),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Oqu(t.msgErr)}}function b(s,i){1&s&&e._UZ(0,"i",16)}function N(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",1)(1,"h1",2),e._uU(2,"forget password"),e.qZA(),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleresetPass())}),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Email :"),e.qZA(),e._UZ(7,"input",6),e.YNc(8,I,3,2,"div",7),e.qZA(),e.TgZ(9,"div",4)(10,"label",18),e._uU(11,"New password :"),e.qZA(),e._UZ(12,"input",19),e.YNc(13,P,3,2,"div",7),e.qZA(),e.TgZ(14,"div",8),e.YNc(15,J,2,1,"p",9),e.TgZ(16,"button",10),e.YNc(17,b,1,0,"i",11),e._uU(18," Submit"),e.qZA()()()()}if(2&s){const t=e.oxw();let o,r;e.xp6(3),e.Q6J("formGroup",t.resetPassForm),e.xp6(5),e.Q6J("ngIf",(null==(o=t.resetPassForm.get("email"))?null:o.errors)&&(null==(o=t.resetPassForm.get("email"))?null:o.touched)),e.xp6(5),e.Q6J("ngIf",(null==(r=t.resetPassForm.get("newPassword"))?null:r.errors)&&(null==(r=t.resetPassForm.get("newPassword"))?null:r.touched)),e.xp6(2),e.Q6J("ngIf",t.msgErr),e.xp6(1),e.Q6J("disabled",t.resetPassForm.invalid),e.xp6(1),e.Q6J("ngIf",t.isloading)}}let Q=(()=>{class s{constructor(t,o,r,Y){this._AuthService=t,this._FormBuilder=o,this._Router=r,this._ToastrService=Y,this.section1=!0,this.section2=!1,this.section3=!1,this.msgErr="",this.isloading=!1,this.forgetForm=this._FormBuilder.group({email:["",[n.kI.required,n.kI.email]]}),this.resetCodeForm=this._FormBuilder.group({resetCode:["",[n.kI.required,n.kI.pattern(/^[0-9]{3,8}$/)]]}),this.resetPassForm=this._FormBuilder.group({email:["",[n.kI.required,n.kI.email]],newPassword:["",[n.kI.required,n.kI.pattern(/^[A-Z][\w]{6,9}$/)]]})}handleForget(){this.isloading=!0,this.forgetForm.valid?this._AuthService.forgotPassword(this.forgetForm.value).subscribe({next:t=>{this.isloading=!1,"success"==t.statusMsg&&(this._ToastrService.success(t.message),this.openSection2())},error:t=>{this.isloading=!1,this.msgErr=t.error.message}}):(this.isloading=!1,this.forgetForm.markAllAsTouched())}handleresetCode(){this.isloading=!0,this.forgetForm.valid?this._AuthService.verifyResetCode(this.resetCodeForm.value).subscribe({next:t=>{this.isloading=!1,"Success"==t.status&&(this._ToastrService.success("you can set a new password"),this.openSection3())},error:t=>{this.isloading=!1,this.msgErr=t.error.message}}):(this.isloading=!1,this.forgetForm.markAllAsTouched())}handleresetPass(){this.isloading=!0,this.forgetForm.valid?this._AuthService.resetPassword(this.resetPassForm.value).subscribe({next:t=>{this.isloading=!1,this._ToastrService.success("Password updated successfully"),this._Router.navigate(["/login"])},error:t=>{this.isloading=!1,this.msgErr=t.error.message}}):(this.isloading=!1,this.forgetForm.markAllAsTouched())}openSection2(){this.section1=!1,this.section3=!1,this.section2=!0,this.msgErr=""}openSection3(){this.section1=!1,this.section2=!1,this.section3=!0,this.msgErr=""}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(d.e),e.Y36(n.qu),e.Y36(g.F0),e.Y36(p._W))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-forgetpassword"]],standalone:!0,features:[e.jDz],decls:4,vars:3,consts:[["class","center bg-main-light",4,"ngIf"],[1,"center","bg-main-light"],[1,"head"],[3,"formGroup","ngSubmit"],[1,"mb-2"],["for","email",1,"text-main"],["id","email","type","email","formControlName","email",1,"form-control"],[4,"ngIf"],[1,"my-3","d-flex","justify-content-between","align-items-center"],["class","text-danger small flex-grow-1",4,"ngIf"],[1,"main-btn","d-block","ms-auto",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],["class","text-danger small",4,"ngIf"],[1,"text-danger","small"],[1,"fas","fa-warning"],[1,"text-danger","small","flex-grow-1"],[1,"fas","fa-spinner","fa-spin"],["id","resetCode","type","resetCode","formControlName","resetCode",1,"form-control"],["for","newPassword",1,"text-main"],["id","newPassword","type","password","formControlName","newPassword",1,"form-control"]],template:function(o,r){1&o&&(e.TgZ(0,"section"),e.YNc(1,v,14,5,"div",0),e.YNc(2,C,14,5,"div",0),e.YNc(3,N,19,6,"div",0),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",r.section1),e.xp6(1),e.Q6J("ngIf",r.section2),e.xp6(1),e.Q6J("ngIf",r.section3))},dependencies:[l.ez,l.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return s})()}}]);