"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[290],{5290:(f,m,i)=>{i.r(m),i.d(m,{CartComponent:()=>x});var l=i(6814),d=i(1120),t=i(4769),h=i(6286);function _(o,p){if(1&o&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("Total Price : ",e.cartData.data.totalCartPrice,"")}}function v(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",15)(2,"div",16),t._UZ(3,"img",17),t.qZA()(),t.TgZ(4,"div",18)(5,"div",19)(6,"div")(7,"h2",20),t._uU(8),t.qZA(),t.TgZ(9,"p",21),t._uU(10),t.qZA(),t.TgZ(11,"button",11),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.removeProduct(c.product.id))}),t._uU(12,"Remove "),t._UZ(13,"i",22),t.qZA()(),t.TgZ(14,"div",23)(15,"button",24,25),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.MAs(16),C=t.MAs(21),g=t.oxw(2);return t.KtG(g.updateProductQuantity(c.product.id,c.count+1,a,C))}),t._uU(17,"+"),t.qZA(),t.TgZ(18,"span",26),t._uU(19),t.qZA(),t.TgZ(20,"button",24,27),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.MAs(16),C=t.MAs(21),g=t.oxw(2);return t.KtG(g.updateProductQuantity(c.product.id,c.count-1,a,C))}),t._uU(22,"-"),t.qZA()()()()()}if(2&o){const e=p.$implicit;t.xp6(3),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product),t.xp6(5),t.Oqu(e.product.title),t.xp6(2),t.hij(" Price : ",e.price,""),t.xp6(9),t.Oqu(e.count)}}const n=function(o){return["/checkout",o]};function u(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"div",4)(3,"h1",5),t._uU(4,"shop cart"),t.qZA(),t.YNc(5,_,2,1,"p",6),t.qZA(),t.YNc(6,v,23,5,"div",7),t.TgZ(7,"div",8)(8,"div")(9,"button",9),t._uU(10,"Online Payment "),t._UZ(11,"img",10),t.qZA()(),t.TgZ(12,"div")(13,"button",11),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.clearCart())}),t._uU(14," Clear all "),t._UZ(15,"i",12),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.cartData.data.totalCartPrice),t.xp6(1),t.Q6J("ngForOf",e.cartData.data.products),t.xp6(3),t.Q6J("routerLink",t.VKq(3,n,e.cartData.data._id))}}function b(o,p){1&o&&(t.TgZ(0,"h2",28),t._uU(1," Your cart is empty "),t.qZA())}let x=(()=>{class o{constructor(e,r,s){this._CartService=e,this._Router=r,this._Renderer2=s,this.cartData={}}ngOnInit(){this._CartService.getCartProducts().subscribe({next:e=>{this.cartData=e},error:e=>{console.log(e)}})}removeProduct(e){this._CartService.removeProduct(e).subscribe({next:r=>{this.cartData=r,this._CartService.cartItemsCount.next(r.numOfCartItems),this.cartData.data.products.length<1&&this._Router.navigate(["/home"])},error:r=>{console.log("error",r)}})}updateProductQuantity(e,r,s,c){this._Renderer2.setAttribute(s,"disabled","true"),this._Renderer2.setAttribute(c,"disabled","true"),r>0?this._CartService.updateProductQuantity(e,r).subscribe({next:a=>{this.cartData=a,this._Renderer2.removeAttribute(s,"disabled"),this._Renderer2.removeAttribute(c,"disabled")},error:a=>{console.log(a),this._Renderer2.removeAttribute(s,"disabled"),this._Renderer2.removeAttribute(c,"disabled")}}):this.removeProduct(e)}clearCart(){this._CartService.clearCart().subscribe({next:e=>{this._Router.navigate(["/home"])},error:e=>{console.log(e)}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(h.N),t.Y36(d.F0),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","my-3",4,"ngIf","ngIfElse"],["empty",""],[1,"my-3"],[1,"bg-main-light","w-100","p-4","rounded-3"],[1,"heading"],[1,"h5","text-uppercase","text-center","fw-bolder"],["class","text-main",4,"ngIf"],["class","row g-0 my-1 py-3 align-items-center border-bottom",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","flex-wrap","gap-2","align-items-center","mt-3"],[1,"main-btn",3,"routerLink"],["src","./assets/images/visa-1.svg","alt","",2,"width","25px"],[1,"main-btn",3,"click"],[1,"fas","fa-trash","text-warning"],[1,"text-main"],[1,"row","g-0","my-1","py-3","align-items-center","border-bottom"],[1,"col-sm-3","col-md-2","col-lg-1"],[1,"px-5","px-sm-0"],[1,"img-fluid","d-block",3,"src","alt"],[1,"col-sm-9","col-md-10","col-lg-11"],[1,"d-flex","justify-content-between","align-items-center","pt-4","pt-sm-0","ps-4"],[1,"h6","m-0","p-0"],[1,"text-main","my-2"],[1,"fas","fa-trash-can"],[1,"d-flex","align-items-center"],[1,"btn","border","border-success",3,"click"],["btn1",""],[1,"mx-2"],["btn2",""],[1,"fw-bolder","my-5","text-center"]],template:function(r,s){if(1&r&&(t.YNc(0,u,16,5,"section",0),t.YNc(1,b,2,0,"ng-template",null,1,t.W1O)),2&r){const c=t.MAs(2);t.Q6J("ngIf",s.cartData.numOfCartItems)("ngIfElse",c)}},dependencies:[l.ez,l.sg,l.O5,d.rH],styles:[".btn[_ngcontent-%COMP%]{border-color:#0aad0a!important;transition:background-color .5s,color .5s;text-wrap:nowrap}.btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:#0aad0a}.btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;background-color:#ccc}"]})}return o})()},6286:(f,m,i)=>{i.d(m,{N:()=>h});var l=i(5619),d=i(4769),t=i(9862);let h=(()=>{class _{constructor(n){this._HttpClient=n,this.baseUrl="https://ecommerce.routemisr.com/api/v1/cart/",this.cartItemsCount=new l.X(0)}getCartProducts(){return this._HttpClient.get(this.baseUrl)}addProductToCart(n){return this._HttpClient.post(this.baseUrl,{productId:n})}removeProduct(n){return this._HttpClient.delete(this.baseUrl+`${n}`)}clearCart(){return this._HttpClient.delete(this.baseUrl)}updateProductQuantity(n,u){return this._HttpClient.put(this.baseUrl+`${n}`,{count:u})}checkoutSession(n,u){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${n}?url=http://localhost:4200`,{shippingAddress:u})}getAllOrders(n){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${n}`)}static#t=this.\u0275fac=function(u){return new(u||_)(d.LFG(t.eN))};static#e=this.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);